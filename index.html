
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>They Lied Meme Generator</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      height: 100vh;
    }
    #sidebar {
      width: 260px;
      background: #1c1c1c;
      padding: 15px;
      box-sizing: border-box;
      overflow-y: auto;
    }
    #sidebar h2 {
      font-size: 18px;
      margin-top: 0;
    }
    #canvas-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #222;
    }
    canvas {
      background: #fff;
      border: 2px solid #333;
      cursor: move;
    }
    button, select, input[type="file"] {
      display: block;
      margin: 8px 0;
      padding: 8px;
      width: 100%;
      background: #333;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #444;
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <h2>They Lied Meme Maker</h2>
    <select id="templateSelect">
      <option value="blank">Blank</option>
      <option value="beforeAfter">Before / After</option>
      <option value="lieOfWeek">Lie of the Week</option>
      <option value="reaction">Reaction</option>
    </select>
    <button id="addText">Text</button>
    <button id="addLogo">Logo</button>
    <button id="addStamp">THEY LIED Stamp</button>
    <button id="addMascot">Lerpy Liar</button>
    <input type="file" id="uploadImage" accept="image/*" multiple>
    <button id="download">Export PNG</button>
  </div>
  <div id="canvas-container">
    <canvas id="memeCanvas" width="900" height="600"></canvas>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const canvas = new fabric.Canvas("memeCanvas");

      // Asset URLs
      const assets = {
        logo: "https://static.wixstatic.com/media/d7bc5f_9f109787e65c463d82461169f65dda33~mv2.png/v1/fill/w_784,h_784,al_c,q_90,usm_0.66_1.00_0.01,enc_avif,quality_auto/logo_2x.png",
        stamp: "https://static.wixstatic.com/media/d7bc5f_e5d4a1012e8e4c46a206fb9bb975feef~mv2.png/v1/fill/w_1158,h_246,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/Middel%205_2x.png",
        mascot: "https://static.wixstatic.com/media/d7bc5f_b22bd54e2f3749f2a97dc3f85891fb0f~mv2.png/v1/crop/x_727,y_1409,w_3680,h_3739/fill/w_620,h_630,fp_0.50_0.50,q_90,usm_0.66_1.00_0.01,enc_avif,quality_auto/TLL%20_2x.png"
      };

      // Add text
      document.getElementById("addText").onclick = () => {
        const text = new fabric.IText("Edit me", {
          left: 100,
          top: 100,
          fill: "#000",
          fontSize: 30,
          fontFamily: "Arial"
        });
        canvas.add(text).setActiveObject(text);
      };

      // Add Logo
      document.getElementById("addLogo").onclick = () => {
        fabric.Image.fromURL(assets.logo, img => {
          img.scaleToWidth(150);
          img.left = 100;
          img.top = 150;
          canvas.add(img).setActiveObject(img);
        });
      };

      // Add Stamp
      document.getElementById("addStamp").onclick = () => {
        fabric.Image.fromURL(assets.stamp, img => {
          img.scaleToWidth(200);
          img.left = 120;
          img.top = 200;
          canvas.add(img).setActiveObject(img);
        });
      };

      // Add Mascot
      document.getElementById("addMascot").onclick = () => {
        fabric.Image.fromURL(assets.mascot, img => {
          img.scaleToWidth(200);
          img.left = 150;
          img.top = 250;
          canvas.add(img).setActiveObject(img);
        });
      };

      // Upload user images
      document.getElementById("uploadImage").addEventListener("change", e => {
        [...e.target.files].forEach(file => {
          const reader = new FileReader();
          reader.onload = f => {
            fabric.Image.fromURL(f.target.result, img => {
              img.scaleToWidth(300);
              canvas.add(img).setActiveObject(img);
            });
          };
          reader.readAsDataURL(file);
        });
      });

      // Download meme
      document.getElementById("download").onclick = () => {
        const link = document.createElement("a");
        link.href = canvas.toDataURL({ format: "png" });
        link.download = "they_lied_meme.png";
        link.click();
      };

      // Simple templates
      document.getElementById("templateSelect").onchange = e => {
        const choice = e.target.value;
        canvas.clear();
        if (choice === "beforeAfter") {
          const t1 = new fabric.IText("Before", { left: 100, top: 50, fontSize: 40, fill: "red" });
          const t2 = new fabric.IText("After", { left: 600, top: 50, fontSize: 40, fill: "green" });
          canvas.add(t1, t2);
        } else if (choice === "lieOfWeek") {
          const t = new fabric.IText("Lie of the Week", { left: 250, top: 50, fontSize: 50, fill: "black" });
          canvas.add(t);
        } else if (choice === "reaction") {
          fabric.Image.fromURL(assets.mascot, img => {
            img.scaleToWidth(200);
            img.left = 350;
            img.top = 150;
            canvas.add(img);
          });
        }
      };
    });
  </script>
</body>
</html>
